:root {
    --avatar-border-width: 1px;
    --avatar-frame-width: calc(54px + var(--avatar-border-width) * 2);
    --avatar-frame-height: calc(54px + var(--avatar-border-width) * 2);
    --avatar-width: 48px;
    --avatar-height: 48px;
    --avatar-frame-spacing: calc((var(--avatar-frame-width) - var(--avatar-width)) / 2 - var(--avatar-border-width));
}

picture {
    box-sizing: border-box;
    width: var(--avatar-frame-width);
    height: var(--avatar-frame-height);
    border: var(--window-border) var(--window-border-color);
    box-shadow: 2px 2px 10px 1px var(--window-border-color);
    border-radius: var(--window-border-radius);
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    z-index: 0;
    img {
        width: var(--avatar-width);
        height: var(--avatar-width);
        box-shadow: 0 0 0 1px #fffa;
    }
    &::before {
        content: "";
        position: absolute;
        z-index: -1;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border-radius: var(--window-border-radius);
        background: linear-gradient(170deg, #ffffffcf 20%, transparent 51%),
        var(--window-background);
        background-color: var(--window-background-color);
        box-shadow: inset 0 2px 0 1px #fffd;
    }
    &::after {
        content: '';
        box-shadow: inset 0 0 0 1px #00000096;
        display: block;
        position: absolute;
        inset: var(--avatar-frame-spacing);
        width: var(--avatar-width);
        height: var(--avatar-width);
    }
    img, &::after {
        border-radius: 2px;
    }
}

.avatar-mask {
    --shadow-color: rgba(0,0,0,0.4);
    filter: drop-shadow(1px 1px 0 var(--shadow-color)) drop-shadow(-1px -1px 0 var(--shadow-color)) drop-shadow(1px -1px 0 var(--shadow-color)) drop-shadow(-1px 1px 0 var(--shadow-color))
}

.mask-layer1, .mask-layer2 {
    overflow: hidden;
    width: 58px;
    height: 58px;
    display: block;
}

.mask-layer1 {
    clip-path: ellipse(50% 120%);
}

.mask-layer2 {
    background-color: red;
    clip-path: ellipse(120% 50%);
    background: linear-gradient(170deg, #ffffffcf 20%, transparent 51%),
    var(--window-background);
    background-color: var(--window-background-color);
}

.avatar-mask {
    position: relative;
    z-index: 0;
    .mask-layer2 {
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        &::after {
            content: '';
            box-shadow: inset 0 0 0 1px #00000096;
            display: block;
            position: absolute;
            inset: 5px;
            width: var(--avatar-width);
            height: var(--avatar-width);
            border-radius: 2px;
        }
    }
    img {
        width: var(--avatar-width);
        height: var(--avatar-width);
        box-shadow: 0 0 0 1px #fffa;
        border-radius: 2px;
    }
}